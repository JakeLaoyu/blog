firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId}),function(){const e=(e,t)=>e.get().then((o=>{let r=o.exists?o.data().count:0;return t&&(r++,e.set({count:r})),r})),t=firebase.firestore().collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",(()=>{if(CONFIG.page.isPost){var o=document.querySelector(".post-title").textContent.trim(),r=t.doc(o);let i=CONFIG.hostname===location.hostname;localStorage.getItem(o)?i=!1:localStorage.setItem(o,!0),e(r,i).then((e=>{document.querySelector(".firestore-visitors-count").innerText=e}))}else CONFIG.page.isHome&&(o=[...document.querySelectorAll(".post-title")].map((o=>(o=o.textContent.trim(),o=t.doc(o),e(o)))),Promise.all(o).then((e=>{const t=document.querySelectorAll(".firestore-visitors-count");e.forEach(((e,o)=>{t[o].innerText=e}))})))}))}();